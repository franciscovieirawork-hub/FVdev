---
import { ViewTransitions } from 'astro:transitions';
import '../styles/global.css';
import Loader from '../components/Loader.astro';

// Mock Data
const professionalExperience = {
  totalYearsOfExperience: 7.2,
  experiences: [
    {
      role: 'Frontend Developer',
      company: 'ITSector',
      employmentType: 'Full-time',
      location: 'Portugal (Remote)',
      startDate: '2023-04',
      endDate: 'Present',
      description: [
        'Frontend development focused on creating new features and maintaining existing ones.',
        'Bug fixing and continuous improvement of application stability and performance.',
        'Active participation in an agile Scrum environment.'
      ],
      technologies: [
        'React',
        'TypeScript',
        'Redux',
        'Zustand',
        'Storybook',
        'Emotion',
        'Jest',
        'Enzyme',
        'React Testing Library',
        'Azure DevOps',
        'Scrum',
        'ESLint',
        'Prettier'
      ]
    },
    {
      role: 'Frontend Developer',
      company: 'NTT DATA (BMW Group project)',
      employmentType: 'Full-time',
      location: 'Portugal (Remote)',
      startDate: '2023-01',
      endDate: '2023-03',
      description: [
        'Frontend development for BMW Group applications.',
        'Implementation of new features and bug fixing across the entire application.',
        'DevOps-related fixes and maintenance of front-end architecture.'
      ],
      technologies: [
        'TypeScript',
        'React',
        'Lit Element',
        'Node.js',
        'Jest',
        'Scrum',
        'Jira',
        'Git',
        'CI/CD'
      ]
    },
    {
      role: 'Frontend Developer / Team Leader',
      company: 'Bryte Technologies GmbH i.G.',
      employmentType: 'Full-time',
      location: 'Remote',
      startDate: '2021-05',
      endDate: '2023-01',
      description: [
        'Worked on an all-in-one platform for remote corporate training.',
        'Ensured intuitive, responsive, and accessible user experiences across multiple devices.',
        'Led frontend development efforts and contributed to architectural decisions.',
        'Supported and mentored team members while maintaining high code quality standards.'
      ],
      technologies: [
        'React',
        'TypeScript',
        'Redux',
        'Storybook',
        'HTML',
        'CSS',
        'JavaScript'
      ]
    },
    {
      role: 'Frontend Developer / Team Leader',
      company: 'Tempos Brilhantes',
      employmentType: 'Freelance',
      location: 'Portugal',
      startDate: '2020-05',
      endDate: '2021-04',
      description: [
        'Frontend development for web and mobile interfaces of an online education platform.',
        'Implementation of new features and architectural improvements.',
        'Unit testing, bug fixing, and repository management.',
        'Led a team of six developers, providing technical guidance and ensuring timely delivery.'
      ],
      technologies: [
        'React',
        'TypeScript',
        'Redux',
        'Node.js',
        'Storybook',
        'Azure DevOps',
        'Jest',
        'GitHub'
      ]
    },
    {
      role: 'Frontend Developer',
      company: 'Ibox Web Solutions / Leilao 24',
      employmentType: 'Freelance',
      location: 'Portugal',
      startDate: '2018-01',
      endDate: '2019-04',
      description: [
        'Frontend development and web design for client-facing applications.',
        'Creation of responsive and user-friendly interfaces.'
      ],
      technologies: [
        'HTML',
        'CSS',
        'JavaScript'
      ]
    }
  ]
};

const formatDate = (dateString: string) => {
  if (dateString === 'Present') return 'Present';
  const [year, month] = dateString.split('-');
  const date = new Date(parseInt(year), parseInt(month) - 1);
  return new Intl.DateTimeFormat('en-GB', { year: 'numeric', month: 'long' }).format(date);
};

---

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="/favicon.ico">
    <meta name="viewport" content="width=device-width" />
    <meta name="generator" content={Astro.generator} />
    <title>Professional Experience - FVDev</title>
    <meta name="description" content="Professional Experience" />
    <ViewTransitions />
  </head>
  <body>
    <Loader />
    <main>
      <div class="container">
        <!-- Back Button -->
        <a href="/" class="back-btn">← back</a>

        <!-- Page Header -->
        <section class="experience-header">
          <h1>professional experience</h1>
          <p class="subtitle">{professionalExperience.totalYearsOfExperience} years of crafting digital experiences</p>
        </section>

        <!-- Experience Timeline -->
        <section class="experience-list">
          {professionalExperience.experiences.map((exp) => (
            <div class="experience-item">
              <div class="experience-header-info">
                <div class="role-company">
                  <h2 class="role">{exp.role}</h2>
                  <p class="company">{exp.company}</p>
                </div>
                <div class="meta-info">
                  <span class="employment-type">{exp.employmentType}</span>
                  <span class="location">{exp.location}</span>
                </div>
              </div>

              <div class="date-range">
                {formatDate(exp.startDate)} — {formatDate(exp.endDate)}
              </div>

              <div class="description">
                {exp.description.map((desc) => (
                  <p>{desc}</p>
                ))}
              </div>

              <div class="technologies">
                {exp.technologies.map((tech) => (
                  <span class="tech-badge">{tech}</span>
                ))}
              </div>
            </div>
          ))}
        </section>

        <!-- CTA Section -->
        <section class="cta-section">
          <p>Want to learn more about my experience?</p>
          <a href="https://pt.linkedin.com/in/franciscovieirafront" target="_blank" class="cta-button">
            Connect with me on LinkedIn
          </a>
        </section>
      </div>
    </main>
  </body>
</html>

<style>
  main {
    min-height: 100vh;
    padding: 40px 20px;
  }

  .container {
    max-width: 900px;
    margin: 0 auto;
  }

  /* Back Button */
  .back-btn {
    display: inline-block;
    margin-bottom: 40px;
    color: #999999;
    text-decoration: none;
    font-size: 0.95rem;
    letter-spacing: 0.01em;
    transition: all 0.2s ease;
    border-bottom: 1px solid transparent;
  }

  .back-btn:hover {
    color: #ffff00;
    border-bottom: 1px solid #ffff00;
  }

  /* Experience Header */
  .experience-header {
    margin-bottom: 60px;
    padding-bottom: 30px;
    border-bottom: 1px solid #333333;
  }

  .experience-header h1 {
    font-size: 3rem;
    font-weight: 700;
    letter-spacing: -0.02em;
    margin-bottom: 15px;
    line-height: 1.2;
  }

  .subtitle {
    font-size: 1.1rem;
    color: #999999;
    font-weight: 400;
    letter-spacing: -0.01em;
  }

  /* Experience List */
  .experience-list {
    display: flex;
    flex-direction: column;
    gap: 50px;
  }

  .experience-item {
    padding: 30px;
    border: 1px solid #333333;
    border-radius: 4px;
    background-color: rgba(255, 255, 255, 0.01);
    transition: all 0.2s ease;
  }

  .experience-item:hover {
    border-color: #ffff00;
    background-color: rgba(255, 255, 0, 0.03);
  }

  .experience-header-info {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: 20px;
    margin-bottom: 15px;
    flex-wrap: wrap;
  }

  .role-company {
    flex: 1;
    min-width: 250px;
  }

  .role {
    font-size: 1.4rem;
    font-weight: 700;
    color: #ffffff;
    letter-spacing: -0.01em;
    margin: 0 0 5px 0;
  }

  .company {
    font-size: 1rem;
    color: #ffff00;
    font-weight: 600;
    margin: 0;
  }

  .meta-info {
    display: flex;
    flex-direction: column;
    align-items: flex-end;
    gap: 8px;
    text-align: right;
  }

  .employment-type {
    display: inline-block;
    background-color: rgba(255, 255, 0, 0.1);
    border: 1px solid #ffff00;
    color: #ffff00;
    padding: 4px 12px;
    border-radius: 3px;
    font-size: 0.8rem;
    font-weight: 600;
    letter-spacing: 0.05em;
  }

  .location {
    font-size: 0.9rem;
    color: #999999;
    letter-spacing: 0.01em;
  }

  .date-range {
    font-size: 0.9rem;
    color: #cccccc;
    margin-bottom: 15px;
    letter-spacing: 0.01em;
  }

  .description {
    display: flex;
    flex-direction: column;
    gap: 10px;
    margin-bottom: 20px;
  }

  .description p {
    font-size: 0.95rem;
    line-height: 1.6;
    color: #e0e0e0;
    margin: 0;
    letter-spacing: -0.01em;
  }

  .technologies {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
  }

  .tech-badge {
    display: inline-block;
    background-color: #1a1a1a;
    border: 1px solid #333333;
    color: #cccccc;
    padding: 6px 12px;
    border-radius: 3px;
    font-size: 0.85rem;
    font-weight: 500;
    letter-spacing: 0.01em;
    transition: all 0.2s ease;
  }

  .tech-badge:hover {
    border-color: #ffff00;
    color: #ffff00;
    background-color: rgba(255, 255, 0, 0.05);
  }

  /* CTA Section */
  .cta-section {
    text-align: center;
    padding: 40px 0;
    margin-top: 40px;
    border-top: 1px solid #333333;
  }

  .cta-section p {
    font-size: 1rem;
    color: #999999;
    margin-bottom: 20px;
    letter-spacing: 0.01em;
  }

  .cta-button {
    display: inline-block;
    background-color: transparent;
    border: 2px solid #ffff00;
    color: #ffff00;
    padding: 12px 30px;
    border-radius: 4px;
    text-decoration: none;
    font-size: 0.95rem;
    font-weight: 600;
    letter-spacing: 0.01em;
    transition: all 0.2s ease;
  }

  .cta-button:hover {
    background-color: #ffff00;
    color: #0f0f0f;
  }

  /* Responsive */
  @media (max-width: 640px) {
    main {
      padding: 30px 20px;
    }

    .experience-header h1 {
      font-size: 2rem;
    }

    .subtitle {
      font-size: 0.95rem;
    }

    .experience-item {
      padding: 20px;
    }

    .experience-header-info {
      flex-direction: column;
      align-items: flex-start;
    }

    .meta-info {
      align-items: flex-start;
      text-align: left;
    }

    .role {
      font-size: 1.1rem;
    }

    .experience-list {
      gap: 30px;
    }
  }
</style>
